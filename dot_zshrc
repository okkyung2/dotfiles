
### Added by Zinit's installer
if [[ ! -f $HOME/.local/share/zinit/zinit.git/zinit.zsh ]]; then
    print -P "%F{33} %F{220}Installing %F{33}ZDHARMA-CONTINUUM%F{220} Initiative Plugin Manager (%F{33}zdharma-continuum/zinit%F{220})â€¦%f"
    command mkdir -p "$HOME/.local/share/zinit" && command chmod g-rwX "$HOME/.local/share/zinit"
    command git clone https://github.com/zdharma-continuum/zinit "$HOME/.local/share/zinit/zinit.git" && \
        print -P "%F{33} %F{34}Installation successful.%f%b" || \
        print -P "%F{160} The clone has failed.%f%b"
fi

source "$HOME/.local/share/zinit/zinit.git/zinit.zsh"
autoload -Uz _zinit
(( ${+_comps} )) && _comps[zinit]=_zinit

# Load a few important annexes, without Turbo
# (this is currently required for annexes)
zinit light-mode for \
    zdharma-continuum/zinit-annex-as-monitor \
    zdharma-continuum/zinit-annex-bin-gem-node \
    zdharma-continuum/zinit-annex-patch-dl \
    zdharma-continuum/zinit-annex-rust

### End of Zinit's installer chunk

# í”ŒëŸ¬ê·¸ì¸
zinit light zsh-users/zsh-autosuggestions
zinit light zsh-users/zsh-syntax-highlighting
zinit light zsh-users/zsh-completions

# ê°ì¢… cli ë„êµ¬ë“¤
# fzf
eval "$(fzf --zsh)"

# zoxide (--cmd jë¡œ zi ì¶©ëŒ ë°©ì§€: j, ji ì‚¬ìš©)
eval "$(zoxide init zsh --cmd j)"

# workspace ë¹ ë¥¸ ì´ë™ (zoxide + fzf)
ws() {
  local dir
  dir=$(zoxide query -l | grep -i workspace | fzf)
  [[ -n "$dir" ]] && cd "$dir"
}

# starship
eval "$(starship init zsh)"

# alias
alias cat="bat"
alias vim="nvim"
alias vi="nvim"
alias s="source ~/.zshrc"
alias zc="vi ~/.zshrc"
alias c="claude"
alias lg="lazygit"
  # tmux
alias t="tmux"
alias ta="tmux attach -t"
alias tn="tmux new -s"
alias tl="tmux ls"
alias tk="tmux kill-session -t"
alias go="cd /Users/ihlee"
  # ê¸°ë³¸ ls ëŒ€ì²´ (ìˆ¨ê¹€ íŒŒì¼ ì•ˆ ë³´ì„)
alias ls='lsd --group-dirs first'

# la: ìˆ¨ê¹€ íŒŒì¼ í¬í•¨ + ê°„ëµ ë³´ê¸°
alias la='lsd -a --group-dirs first'

# ll: ìˆ¨ê¹€ íŒŒì¼ í¬í•¨ + ìƒì„¸ ë³´ê¸°
alias ll='lsd -alh --group-dirs first'

# lt: íŠ¸ë¦¬ êµ¬ì¡°ë¡œ ë³´ê¸° (lt2: 2 depth)
alias lt='lsd --tree --group-dirs first'
alias lt2='lsd --tree --depth 2 --group-dirs first'

# í”„ë¡œì íŠ¸ëª…ë§Œ ì¶œë ¥í•´ì„œ ì„ íƒ
alias gls='glab repo list --mine -P 100 -F json | jq -r ".[].ssh_url_to_repo" | fzf | pbcopy && echo "copied!"'

# í”„ë¡œì íŠ¸ëª…ìœ¼ë¡œ clone cli ì¶œë ¥
alias glc='print -z "git clone $(glab repo list --mine -P 100 -F json | jq -r ".[].ssh_url_to_repo" | fzf)"'

# ì¡°ì§ í¬í•¨í•´ì„œ ë³´ê¸°
alias ghc='print -z "git clone $(gh repo list --limit 100 --json nameWithOwner,sshUrl | jq -r ".[] | \"\(.nameWithOwner) \(.sshUrl)\"" | fzf | awk "{print \$NF}")"'

export PATH="$HOME/.local/bin:$PATH"
eval "$(mise activate zsh)"
export PATH="~/homebrew/opt/trash-cli/bin:$PATH"

# zoxide + fzf + lsd ë¯¸ë¦¬ë³´ê¸°
zf() {
  local dir
  # zoxide query + fzf with lsd preview
  dir=$(zoxide query -l | fzf \
    --prompt="ğŸ“‚ Select directory: " \
    --height=60% \
    --reverse \
    --preview 'lsd --tree --depth 2 --group-dirs first --color=always --icon=always {}' \
    --preview-window=right:40%:wrap)

  # ì„ íƒ ì·¨ì†Œì‹œ ì¢…ë£Œ
  [[ -z "$dir" ]] && return

  # ì´ë™ ì•Œë¦¼ ë° ì´ë™
  echo "ğŸ“ Moving to: $dir"
  j "$dir" || return
  # ì´ë™ í›„ lsd ì¶œë ¥
  lsd --group-dirs first
}
